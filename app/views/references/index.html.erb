<h1>Listing References</h1>

<table>
  <thead>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @references.each do |reference| %>
      <tr>
        <!--<td><%= reference.name %></td>-->
        <td>
          <span class="has-tooltip" data-placement="left" data-toggle="tooltip" title="<%= "Created on #{reference.created_at.strftime("%m/%e/%Y at %w:%M %p")}, Last modified on #{reference.updated_at.strftime("%m/%e/%Y at %w:%M %p")}" %>">
            <%= reference.name %>
          </span>
        </td>

        <td><%= reference.description %></td>
        <td><%= link_to 'Show', reference %></td>
        <td>
          <% if !reference.reference_lists.empty? %>
              <!-- Button trigger modal -->
              <button class="btn btn-link" data-toggle="modal" data-target="#reference-<%= reference.id %>-reference_lists">
                View references list
              </button>

              <!-- Modal -->
              <div class="modal fade" id="reference-<%= reference.id %>-reference_lists" tabindex="-1" role="dialog" aria-labelledby="reference-<%= reference.id %>-name" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="modal-title" id="todo-<%= reference.id %>-name"><%= reference.name %></h4>
                    </div>
                    <div class="modal-body">
                      <% reference.reference_lists.each do |reference_list| %>
                          <%= reference_list.name %></br>
                      <% end %>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>
          <% end %>
        </td>
        <td><%= link_to 'Edit', edit_reference_path(reference) %></td>
        <td><%= link_to 'Destroy', reference, method: :delete, data: {confirm: 'Are you sure?'} %></td>
      </tr>
  <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Reference', new_reference_path %>
